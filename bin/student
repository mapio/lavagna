#!/usr/bin/env python

from os import getuid
from platform import node
from pwd import getpwuid
from urllib import urlencode
from urllib2 import urlopen
from webbrowser import open_new
from sys import argv

url = 'http://hal.silab.di.unimi.it:8000/get_token'

student = argv[ 1 ] if len( argv ) >= 2 else getpwuid( getuid() ).pw_gecos
location = argv[ 2 ] if len( argv ) == 3 else node()

data = urlencode( { 'student': student, 'location': location } ) 
token = urlopen( url, data ).read()

open_new( 'http://hal.silab.di.unimi.it:8000/s/{0}'.format( token ) )
