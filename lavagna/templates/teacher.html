{% extends "layout.html" %}
{% block script %}
function post_hint( e ) {
	var kind = $( '#kind' ).val();
	var hint = $( '#hint' ).val();
	if ( hint != '' ) $.post( '/post/answer', { 'message': hint, 'kind': kind, 'destination': 'pippo' } );
	$( '#hint' ).val( '' );
}
$( document ).ready( function () {
	var source = new EventSource( '/stream/questions' );
	source.onmessage = function( e ) {
		var data = JSON.parse( e.data );
		$( '#questions' ).after( data.message );
	};
} );
{% endblock %}
{% block body %}
<p>Hint:</p>
<form action="#" method="post">
	<textarea rows=4 cols=80 id="hint"></textarea>
	<select id="kind">
		<option selected>text</option>
		<option>code</option>
		<option>html</option>
	</select>
	<button type="button" onclick="post_hint(); return false;">Post</button>
</form>
<p id="questions">Questions:</p>
{% endblock %}
